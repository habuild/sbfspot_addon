name: "sbfspot"
version: "2022.0.4"
slug: "sbfspot"
description: "Manage SBFspot with a simple interface"
url: "https://github.com/habuild/sbfspot_addon/tree/main/sbfspot"
arch:
- armhf
- armv7
- aarch64
host_network: true
host_dbus: true
init: false
privileged:
- SYS_MODULE
devices:
- /dev/ttyAMA0
options:
  BTAddress: ""
  Password: "0000"
  MIS_Enabled: "0"
  Plantname: "MyPlant"
  OutputPath: "/data/sbfspot/%Y"
  OutputPathEvents: "/data/sbfspot/%Y/events"
  Latitude: "50.80"
  Longitude: "4.33"
  CalculateMissingSpotValues: "1"
  DateTimeFormat: "%d/%m/%Y %H:%M:%S"
  DateFormat: "%d/%m/%Y"
  DecimalPoint: "comma"
  TimeFormat: "%H:%M:%S"
  SynchTime: "0"
  SynchTimeLow: "1"
  SynchTimeHigh: "3600"
  SunRSOffset: "900"
  Locale: "en-US"
  Timezone: "Europe/Brussels"
  BTConnectRetries: "10"
  CSV_Export: "0"
  CSV_ExtendedHeader: "1"
  CSV_Header: "1"
  CSV_SaveZeroPower: "1"
  CSV_Delimiter: "semicolon"
  CSV_Spot_TimeSource: "Inverter"
  CSV_Spot_WebboxHeader: "0"
  SQL_Database: "SBFspot"
  SQL_Hostname: "DB Hostname"
  SQL_Port: "3306"
  SQL_Username: "DB user"
  SQL_Password: "DB pass"
  MQTT_Publisher: "/usr/bin/mosquitto_pub"
  MQTT_Host: "mqtt hostname"
  MQTT_Port: ""
  MQTT_Username: "!secret mqtt_user"
  MQTT_Password: "!secret has_pass"
  MQTT_Topic: "homeassistant/sbfspot_{plantname}/sbfspot_{serial}"
  MQTT_ItemFormat: '"{key}": {value}'
  MQTT_ItemDelimiter: "comma"
  MQTT_PublisherArgs: '-h {host} -u {MQTT_Username} -P {MQTT_Password} -t {topic} -m "{{message}}" -d'
  MQTT_Data: "Timestamp,SunRise,SunSet,InvSerial,InvName,InvTime,InvStatus,InvTemperature,InvGridRelay,EToday,ETotal,PACTot,UDC1,UDC2,IDC1,IDC2,PDC1,PDC2"
  LogDir: "/data/sbfspot/log"
  LogLevel: "info"
  PVoutput_SID: ""
  PVoutput_Key: ""
  MQTT_ENABLE: "1"
schema:
  BTAddress: "str"
  Password: "str"
  MIS_Enabled: "int"
  Plantname: "str"
  OutputPath: "str"
  OutputPathEvents: "str"
  Latitude: "float"
  Longitude: "float"
  CalculateMissingSpotValues: "int"
  DateTimeFormat: "str"
  DateFormat: "str"
  DecimalPoint: "str"
  TimeFormat: "str"
  SynchTime: "int"
  SynchTimeLow: "int"
  SynchTimeHigh: "int"
  SunRSOffset: "int"
  Locale: "str"
  Timezone: "str"
  BTConnectRetries: "int"
  CSV_Export: "int"
  CSV_ExtendedHeader: "int"
  CSV_Header: "int"
  CSV_SaveZeroPower: "int"
  CSV_Delimiter: "str"
  CSV_Spot_TimeSource: "str"
  CSV_Spot_WebboxHeader: "int"
  SQL_Database: "str"
  SQL_Hostname: "str"
  SQL_Port: "str"
  SQL_Username: "str?"
  SQL_Password: "str?"
  MQTT_Publisher: "str"
  MQTT_Host: "str"
  MQTT_Port: "str"
  MQTT_Username: "str?"
  MQTT_Password: "str?"
  MQTT_Topic: "str"
  MQTT_ItemFormat: "str"
  MQTT_ItemDelimiter: "str"
  MQTT_PublisherArgs: "str"
  MQTT_Data: "str"
  LogDir: "str"
  LogLevel: "str"
  PVoutput_SID: "str"
  PVoutput_Key: "str"
  MQTT_ENABLE: "int"
image: "ghcr.io/habuild/{arch}-sbfspot"
